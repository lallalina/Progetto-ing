<div class="container">
  <!--TODO add loader-->
  <select
    class="form-control role-filter"
    [(ngModel)]="activeFilter"
    (change)="applyActiveFilter()"
  >
    <option [value]="FilterOptions.All">Tutti</option>
    <option [value]="FilterOptions.Barbers">Barbieri</option>
    <option [value]="FilterOptions.Admins">Aministratori</option>
  </select>
  <!--Table-->
  <app-table [data]="tableData">
    <ng-template #headers>
      <th>Nome</th>
      <th>Cognome</th>
      <th>Mail</th>
      <th>Cellulare</th>
      <th>Ruolo</th>
    </ng-template>
    <ng-template #rows let-row>
      <td>{{ row.nome }}</td>
      <td>{{ row.cognome }}</td>
      <td>{{ row.mail }}</td>
      <td>{{ row.cellulare }}</td>
      <td>{{ row.role | roleName }}</td>
    </ng-template>
  </app-table>

  <!--Registra parrucchieri-->
  <!--Content-->
  <div class="row mt-5">
    <div class="col-4">
      <form [formGroup]="barbersForm" (ngSubmit)="addBarber()">
        <legend>Registra Parrucchieri</legend>
        <!--nome-->
        <div class="form-group">
          <input
            formControlName="nome"
            class="form-control"
            type="text"
            placeholder="Nome"
          />
          <!--check nome-->
          <div
            *ngif="nome.invalid && (nome.dirty || nome.touched)"
            class="alert alert"
            -danger
          >
            <div *ngIf="nome.errors?.['required']">inserisci il nome</div>
          </div>
        </div>
        <!--cognome-->
        <div class="form-group">
          <input
            formControlName="cognome"
            class="form-control"
            type="text"
            placeholder="Cognome"
          />
          <!--check cognome-->
          <div
            *ngif="cognome.invalid && (cognome.dirty || cognome.touched)"
            class="alert alert"
            -danger
          >
            <div *ngIf="cognome.errors?.['required']">inserisci il cognome</div>
          </div>
        </div>
        <!--email-->
        <div class="form-group">
          <input
            formControlName="mail"
            class="form-control"
            type="email"
            placeholder="Email"
          />
          <!--check email-->
          <div
            *ngif="mail.invalid && (mail.dirty || mail.touched)"
            class="alert alert"
            -danger
          >
            <div *ngIf="mail.errors?.['required']">inserisci l' email</div>
          </div>
        </div>
        <!--password-->
        <div class="form-group">
          <input
            formControlName="password"
            class="form-control"
            type="password"
            placeholder="Password (min 8 caratteri)"
          />
          <!--check password-->
          <div
            *ngif="password.invalid && (password.dirty || password.touched)"
            class="alert alert"
            -danger
          >
            <div *ngIf="password.errors?.['required']">
              inserisci la passord
            </div>
            <div *ngIf="password.errors?.['minLenght']">
              la password deve essere lunga 8 caratteri
            </div>
          </div>
        </div>
        <!--confPassword-->
        <div class="form-group">
          <input
            formControlName="confPassword"
            class="form-control"
            type="password"
            placeholder="Conferma Password"
          />
          <!--check confPassword-->
          <div
            *ngif="
              confPassword.invalid &&
              (confPassword.dirty || confPassword.touched)
            "
            class="alert alert"
            -danger
          >
            <div *ngIf="confPassword.errors?.['required']">
              inserisci la passord
            </div>
            <div *ngIf="confPassword.errors?.['minLenght']">
              la password deve essere lunga 8 caratteri
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-dark">Crea</button>
      </form>
    </div>

    <!--Registra admin-->
    <div class="col-4 offset-3">
      <form
        [formGroup]="adminsForm"
        (ngSubmit)="addAdmin()"
        class="form"
        name="form"
      >
        <legend>Registra Admin</legend>
        <div class="form-group">
          <input
            formControlName="nome"
            class="form-control"
            type="text"
            placeholder="Nome"
          />
        </div>
        <div class="form-group">
          <input
            formControlName="cognome"
            class="form-control"
            type="text"
            placeholder="Cognome"
          />
        </div>
        <div class="form-group">
          <input
            formControlName="mail"
            class="form-control"
            type="email"
            placeholder="Email"
          />
        </div>
        <div class="form-group">
          <input
            formControlName="password"
            class="form-control"
            type="password"
            placeholder="Password"
          />
        </div>
        <div class="form-group">
          <input
            formControlName="confPassword"
            class="form-control"
            type="password"
            placeholder="Conferma Password"
          />
        </div>
        <button
          type="submit"
          class="btn btn-dark"
          [disabled]="!this.adminsForm.valid"
        >
          Crea
        </button>
      </form>
    </div>
  </div>
</div>
